"use strict";$(function(){function t(t,e){return new Promise(function(o,n){$.ajax({url:"https://hwa-weather.herokuapp.com/weather/"+e+"/"+t,type:"GET",port:8888,dataType:"json",success:function(t){o(t)},error:function(t){n(t)}})})}function e(e){t(e,"now").then(function(t){var e=t.results[0].now;$(".city").text(t.results[0].location.name),$(".weather-des").text(e.text),$(".tempture").text(e.temperature+"°"),$(".weather .weather-icon").attr("src","dist/imgs/weather_icon/"+e.code+".png"),"0"===e.code||"2"===e.code||"5"===e.code||"7"===e.code||"38"===e.code?$(".container").removeClass("cloud").addClass("sun"):$(".container").removeClass("sun").addClass("cloud")}).catch(function(t){console.log(t)}),t(e,"recent").then(function(t){for(var e=t.results[0].daily,o=1;o<e.length;o++){var n=$(".weather-item").eq(o-1);n.find("span.high").text(e[o].high+"°"),n.find("span.low").text(e[o].low+"°"),n.find(".weather-icon").attr("src","dist/imgs/weather_icon/"+e[o].code_day+".png")}})}navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e(t.coords.latitude.toFixed(2)+":"+t.coords.longitude.toFixed(2))}):e("上海"),$(".location").on("click",function(){$(".model").toggleClass("show")}),$(".model button").on("click",function(){var t=$('input[name="input_city"]').val().toString().trim();t&&($('input[name="input_city"]').val(""),e(t)),$(".location").click()}),$(document).keypress(function(t){$(".model").hasClass("show")&&13===t.which&&$(".model button").click()})});